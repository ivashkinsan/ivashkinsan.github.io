# Тренажер Построения Септаккордов

Этот проект представляет собой интерактивный веб-тренажер для изучения и практики построения различных видов септаккордов от одной известной ноты.

## Функционал

- **Разнообразие Аккордов**: Поддержка нескольких типов септаккордов, включая большой мажорный, доминантсептаккорд, минорный, полууменьшенный и другие.
- **Выбор Упражнений**: Пользователь может выбрать тип аккорда для тренировки через выпадающее меню.
- **Рандомизация**: Порядок упражнений каждый раз перемешивается, что обеспечивает реиграбельность и не позволяет "зазубрить" ответы.
- **Сохранение Прогресса**: Прогресс для каждого типа аккорда сохраняется отдельно в `localStorage` браузера. Вы можете безопасно закрывать вкладку и возвращаться к упражнениям позже.
- **Статистика и История**: После завершения всех упражнений для одного типа аккорда появляется окно с подробной статистикой (время, попытки, качество). Также доступна история всех завершенных сессий.
- **Чит-код для Тестирования**: Для быстрой проверки окна завершения можно набрать на клавиатуре слово `seventh`.

## Структура Проекта

Проект написан на "ванильном" JavaScript с использованием ES-модулей.

-   `seventh.html`: Основной и единственный HTML-файл, который служит точкой входа в приложение.
-   `stage.css`: Файл стилей. Отвечает за весь внешний вид приложения, включая темную тему и табличное отображение.
-   `main.js`: Главный управляющий файл. Он инициализирует приложение, управляет состоянием (state), обрабатывает все действия пользователя (выбор нот, смена типа аккорда), отвечает за сохранение и загрузку прогресса.
-   `ui.js`: Отвечает исключительно за отрисовку интерфейса. Генерирует HTML-структуру таблицы на основе полученных данных и вставляет ее в `seventh.html`.
-   `music_theory.js`: "Мозг" приложения. Содержит всю музыкальную логику: карты интервалов для разных аккордов и функцию `calculateChord` для вычисления правильных нот.
-   `chord_datasets.js`: База данных упражнений. Здесь генерируются и хранятся все наборы заданий для каждого типа аккорда, а также их названия и правильные обозначения ступеней.

## Как добавить новый тип аккорда

Архитектура проекта позволяет легко добавлять новые виды септаккордов. Для этого нужно выполнить всего 2 шага:

1.  **Добавить карту интервалов в `music_theory.js`**:
    Откройте `music_theory.js` и добавьте новый ключ и объект в `intervalMaps`. Например, для аккорда `MyNewChord` с интервалами `1, b3, 5, #7`:
    ```javascript
    export const intervalMaps = {
        // ... существующие карты
        myNewChord: { 1: 0, 3: 3, 5: 7, 7: 12 } 
    };
    ```

2.  **Добавить набор данных в `chord_datasets.js`**:
    Откройте `chord_datasets.js` и добавьте генерацию упражнений и новый объект в `chordDatasets`.
    
    Сначала сгенерируйте упражнения:
    ```javascript
    const myNewChordExercises = [];
    notes.forEach(note => {
        degreesKeys.forEach(degree => {
            myNewChordExercises.push({
                id: `myNewChord_${degree}_${note}`,
                "given_degree": degree,
                "given_note": note
            });
        });
    });
    ```
    
    Затем добавьте сам набор данных:
    ```javascript
    export const chordDatasets = {
      // ... существующие наборы
      'myNewChord': {
        name: 'Мой новый аккорд - Xnew',
        degrees: [
            { key: 7, label: '#7' },
            { key: 5, label: '5' },
            { key: 3, label: 'b3' },
            { key: 1, label: '1' }
        ],
        exercises: myNewChordExercises
      }
    };
    ```
После этих двух шагов приложение автоматически добавит новый тип аккорда в выпадающий список и будет корректно с ним работать.
